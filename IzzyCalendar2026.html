<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family Calendar 2026</title>
    <style>
        :root {
            --school: #2563EB;
            --family: #10B981;
            --fun: #DB2777;
            --holiday: #F97316;
            --text-dark: #1e293b;
            --bg-light: #ffffff;
            --border: #e2e8f0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background: #f8fafc;
            color: var(--text-dark);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        /* Navigation Button */
        .back-button {
            display: inline-block;
            margin-bottom: 20px;
            text-decoration: none;
            color: var(--text-dark);
            font-weight: 600;
            font-size: 0.9rem;
            padding: 8px 12px;
            border-radius: 8px;
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            transition: all 0.2s ease;
        }

        .back-button:hover {
            color: var(--school);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transform: translateY(-1px);
        }

        .app-container {
            width: 100%;
            max-width: 500px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            margin-bottom: 40px;
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid var(--border);
        }

        .header h2 {
            margin: 0;
            font-size: 1.2rem;
            font-weight: 700;
        }

        .nav-btn {
            background: none;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 8px 12px;
            cursor: pointer;
        }

        /* Grid */
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            padding: 10px;
            gap: 5px;
        }

        .day-label {
            text-align: center;
            font-size: 0.8rem;
            font-weight: 600;
            color: #64748b;
            padding-bottom: 10px;
        }

        .day-cell {
            aspect-ratio: 1/1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding-top: 5px;
            border-radius: 10px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .day-cell:hover {
            background: #f1f5f9;
        }

        .day-cell.selected {
            background: #e0f2fe;
            border: 2px solid var(--school);
        }

        .day-number {
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 4px;
        }

        .day-cell.empty {
            pointer-events: none;
        }

        /* Dots */
        .dots-container {
            display: flex;
            gap: 3px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
        }

        /* Details Panel */
        .details-panel {
            padding: 20px;
            border-top: 1px solid var(--border);
            background: #f8fafc;
            min-height: 100px;
        }

        .event-card {
            background: white;
            padding: 15px;
            border-radius: 12px;
            border-left: 5px solid #ccc;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .event-title {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 5px;
        }

        .event-desc {
            font-size: 0.9rem;
            color: #475569;
        }

        .badge {
            display: inline-block;
            font-size: 0.7rem;
            padding: 2px 8px;
            border-radius: 10px;
            color: white;
            margin-bottom: 8px;
            text-transform: uppercase;
            font-weight: bold;
        }

        /* NEW: Compact Month List */
        .month-list {
            padding: 0 20px 20px;
            background: #f8fafc;
        }
        
        .month-list h3 {
            margin: 0 0 10px 0;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: #64748b;
            font-weight: 700;
        }

        .compact-item {
            display: flex;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #e2e8f0;
            font-size: 0.9rem;
        }
        
        .compact-item:last-child {
            border-bottom: none;
        }

        .compact-date {
            font-variant-numeric: tabular-nums;
            font-weight: 600;
            color: #334155;
            width: 45px;
            flex-shrink: 0;
        }

        .compact-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 12px;
            flex-shrink: 0;
        }

        .compact-title {
            color: var(--text-dark);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .compact-faint {
            color: #94a3b8;
            font-style: italic;
            font-size: 0.85rem;
        }

    </style>
</head>
<body>

<!-- Back Button -->
<a href="index.html" class="back-button">â¬… Back to Index</a>

<div class="app-container">
    <div class="header">
        <button class="nav-btn" onclick="changeMonth(-1)">&lt;</button>
        <h2 id="monthTitle">January 2026</h2>
        <button class="nav-btn" onclick="changeMonth(1)">&gt;</button>
    </div>

    <div class="calendar-grid" id="grid">
        <!-- JS will inject days here -->
    </div>

    <div class="details-panel" id="details">
        <div style="text-align: center; color: #94a3b8; margin-top: 30px;">
            Select a date to view details
        </div>
    </div>

    <!-- NEW: Month List Section -->
    <div class="month-list" id="monthList">
        <!-- JS will inject list here -->
    </div>
</div>

<script>

	async function loadEvents() {
	  const response = await fetch('events.json');
	  if (!response.ok) {
		throw new Error(`Failed to load events.json: ${response.status}`);
	  }
	  const events = await response.json();
	  return events;
	}


    // --- DATA ---
    const rawEvents = [];
	
	// Example usage:
	loadEvents().then(rawEvents => {
	  console.log("Loaded events:", rawEvents);
	});


	/*
		{ date: "2026-01-05", title: "UCSC Winter Quarter Begins", type: "school", desc: "Start of winter instruction." },
        { date: "2026-01-13", endDate: "2026-01-19", title: "London Trip", type: "family", desc: "Ray going to London for Robbieâ€™s 50th." },
        { date: "2026-01-22", title: "Teeth Whitening", type: "family", desc: "Cait's appointment." },
        { date: "2026-01-25", title: "Ukeclectics Practice ðŸŽ¸", type: "family", desc: "Ukelectics Practice" },
        { date: "2026-02-06", endDate: "2026-02-08", title: "Theta Family Weekend", type: "family", desc: "Family Meetup at Santa Cruz" },
		{ date: "2026-02-14", title: "Valentines Day ðŸ’˜", type: "family", desc: "Red Roses" },
        { date: "2026-02-15", title: "Pilgrams Gig", type: "fun", desc: "Ukeclectics gig" },
		{ date: "2026-02-16", title: "Presidentsâ€™ Day", type: "holiday", desc: "Federal holiday." },
		{ date: "2026-02-22", title: "Pickers #18 ðŸŽ¸", type: "family", desc: "Picker Meetup at Dave Irvines,  2:00pm to 6:00pm" },
		{ date: "2026-02-27", title: "UCSC eBill/ePay Due ðŸ’°", type: "school", desc: "Registration & housing fees due." },
        { date: "2026-03-17", title: "Oceans Exam and Femism Essay Due", type: "school", desc: "Oceans Exam and Femism Essay Due" },
		{ date: "2026-03-17", title: "Saint Patricks Day â˜˜ï¸", type: "fun", desc: "Take Helen out to Irish Pub and Trad Music" },
        { date: "2026-03-18", title: "British Comedian ðŸ˜¹", type: "fun", desc: "Helen & Ray night out." },
        { date: "2026-03-20", title: "Izzy Flys to SD for Spring Break ðŸ›«", type: "school", desc: "Flight :2409 , Departs SJC 12:23pm , Arrives SAN 1:48pm" },
        { date: "2026-03-24", title: "Deadlines Due", type: "school", desc: "Winter Grades & Housing Fees Due." },
        { date: "2026-03-29", title: "Pickers #19 ðŸŽ¸", type: "family", desc: "Picker Meetup at Dave Irvines, 2:00PM to 6:00PM" },
		{ date: "2026-03-29", title: "Izzy Fly Back to College ðŸ›«", type: "school", desc: "Flight :2409 , Departs SAN  10:07am , Arrives SJC 11:46 am" },
		{ date: "2026-03-30", title: "Spring Quarter Begins", type: "school", desc: "Start of spring instruction." },
        { date: "2026-04-04",  title: "Bayshire Gig ", type: "fun", desc: "Ukeclectics playing at bayshire" },
        { date: "2026-04-08",  title: "China Anniversary â˜•", type: "fun", desc: "Wedding Anniversary : Buy some China" },
        { date: "2026-04-16", title: "Cait's Bday ðŸŽ‚", type: "fun", desc: "Cait's Birthday" },
        { date: "2026-04-10", endDate: "2026-04-12", title: "Coachella ðŸ¤˜", type: "fun", desc: "Cait going to Coachella." },
		{ date: "2026-05-16", endDate: "2026-05-18", title: "New York Trip", type: "fun", desc: "Raymond and Helen go to New York." },
        { date: "2026-05-25", title: "Memorial Day", type: "holiday", desc: "Federal holiday." },
        { date: "2026-05-30", title: "Helen's Recital", type: "fun", desc: "North Coast Strings Intermediate play" },
        { date: "2026-05-31", title: "Rock 'n' Roll Half Marathon", type: "fun", desc: "Cait & Michael running in San Diego." },
        { date: "2026-06-05", title: "Spring Instruction Ends", type: "school", desc: "Last day of classes." },
        { date: "2026-06-06", title: "Assistance League Gig", type: "fun", desc: "Assistance League Aniversary Gig" },
        { date: "2026-06-08", endDate: "2026-06-11", title: "UCSC Spring Finals", type: "school", desc: "Examination week." },
        { date: "2026-06-11", title: "Spring Quarter Ends", type: "school", desc: "End of spring quarter." },
        { date: "2026-06-16", title: "Spring Grades Due", type: "school", desc: "Grades deadline." },
        { date: "2026-06-19", title: "Juneteenth", type: "holiday", desc: "Federal holiday." },
        { date: "2026-07-03", title: "Independence Day (Obs)", type: "holiday", desc: "Federal holiday observed." },
        { date: "2026-07-05", title: "Helens's Bday ðŸŽ‚", type: "fun", desc: "Helen's Birthday" },
        { date: "2026-07-12", title: "Isabella's Bday ðŸŽ‚", type: "fun", desc: "Isabella's Birthday" },
        { date: "2026-07-21", title: "Ed Sheeran Concert ðŸ¤˜", type: "fun", desc: "The LOOP Tour at Petco Park." },
        { date: "2026-09-07", title: "Labor Day", type: "holiday", desc: "Federal holiday." }
    ];
*/
    // --- STATE ---
    let currentDate = new Date();//Date(2026, 1, 2); // Start Jan 2026
    const colors = { school: 'var(--school)', family: 'var(--family)', fun: 'var(--fun)', holiday: 'var(--holiday)' };

    // --- LOGIC ---
    function getEventsForDate(d) {
        const dateStr = d.toISOString().split('T')[0];
        return rawEvents.filter(e => {
            if (e.endDate) return dateStr >= e.date && dateStr <= e.endDate;
            return e.date === dateStr;
        });
    }

    function renderCalendar() {
        const grid = document.getElementById('grid');
        const monthTitle = document.getElementById('monthTitle');
        grid.innerHTML = '';

        // Set Header
        const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
        monthTitle.innerText = `${monthNames[currentDate.getMonth()]} ${currentDate.getFullYear()}`;

        // Day Labels
        ['S', 'M', 'T', 'W', 'T', 'F', 'S'].forEach(day => {
            const el = document.createElement('div');
            el.className = 'day-label';
            el.innerText = day;
            grid.appendChild(el);
        });

        // Empty Slots
        const firstDay = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1).getDay();
        for (let i = 0; i < firstDay; i++) {
            const el = document.createElement('div');
            el.className = 'day-cell empty';
            grid.appendChild(el);
        }

        // Days
        const daysInMonth = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0).getDate();
        for (let i = 1; i <= daysInMonth; i++) {
            const cell = document.createElement('div');
            cell.className = 'day-cell';
            
            // Use noon to avoid timezone shifting issues
            const currentDayDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), i, 12, 0, 0);
            
            // Number
            const num = document.createElement('div');
            num.className = 'day-number';
            num.innerText = i;
            cell.appendChild(num);

            // Events
            const daysEvents = getEventsForDate(currentDayDate);
            if (daysEvents.length > 0) {
                const dotsDiv = document.createElement('div');
                dotsDiv.className = 'dots-container';
                daysEvents.forEach(ev => {
                    const dot = document.createElement('div');
                    dot.className = 'dot';
                    dot.style.backgroundColor = colors[ev.type];
                    dotsDiv.appendChild(dot);
                });
                cell.appendChild(dotsDiv);
                
                // Interaction
                cell.onclick = () => {
                    document.querySelectorAll('.day-cell').forEach(c => c.classList.remove('selected'));
                    cell.classList.add('selected');
                    renderDetails(daysEvents[0], i, monthNames[currentDate.getMonth()]);
                };
            }

            grid.appendChild(cell);
        }

        // Update Month List
        renderMonthList(monthNames[currentDate.getMonth()]);
    }

    function renderDetails(event, day, month) {
        const details = document.getElementById('details');
        details.innerHTML = `
            <div class="event-card" style="border-color: ${colors[event.type]}">
                <span class="badge" style="background: ${colors[event.type]}">${event.type}</span>
                <div class="event-title">${event.title}</div>
                <div class="event-desc">${month} ${day} â€¢ ${event.desc}</div>
            </div>
        `;
    }

    function renderMonthList(monthName) {
        const listContainer = document.getElementById('monthList');
        listContainer.innerHTML = `<h3>Events in ${monthName}</h3>`;

        // Filter events that occur in this month
        // Logic: Event Start <= Month End AND Event End >= Month Start
        const currentMonthStart = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);
        const currentMonthEnd = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);

        // Convert to YYYY-MM-DD strings for easy comparison with raw data
        const mStartStr = currentMonthStart.toISOString().split('T')[0];
        const mEndStr = currentMonthEnd.toISOString().split('T')[0];

        const eventsInView = rawEvents.filter(e => {
            const eStart = e.date;
            const eEnd = e.endDate || e.date;
            return eStart <= mEndStr && eEnd >= mStartStr;
        });

        // Sort by date
        eventsInView.sort((a, b) => a.date.localeCompare(b.date));

        if (eventsInView.length === 0) {
            listContainer.innerHTML += `<div class="compact-item"><span class="compact-faint">No events this month</span></div>`;
            return;
        }

        eventsInView.forEach(e => {
            const dayStr = e.date.split('-')[2]; // Extract DD
            const html = `
                <div class="compact-item">
                    <div class="compact-date">${dayStr}</div>
                    <div class="compact-dot" style="background: ${colors[e.type]}"></div>
                    <div class="compact-title">${e.title}</div>
                </div>
            `;
            listContainer.innerHTML += html;
        });
    }

    function changeMonth(delta) {
        currentDate.setMonth(currentDate.getMonth() + delta);
        // Reset details panel when changing months
        document.getElementById('details').innerHTML = 
            '<div style="text-align: center; color: #94a3b8; margin-top: 30px;">Select a date to view details</div>';
        renderCalendar();
    }

    // Init
    renderCalendar();
</script>

</body>
</html>